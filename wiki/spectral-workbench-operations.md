---
title: "Spectral Workbench Operations"

tagnames: 'spectrometer, software, spectral-workbench, spectral-workbench-api, developers, parent:spectral-workbench'
author: warren
path: /wiki/spectral-workbench-operations.md
nid: 12568
uid: 1
cids: 
---

![](https://publiclab.org/public/system/images/photos/000/015/757/original/Screenshot_2016-02-10_at_9.24.11_AM.png)

# Spectral Workbench Operations

by [warren](/profile/warren), [Emmaduncan](/profile/Emmaduncan)

January 07, 2016 17:04 | Tags: [spectrometer](/tag/spectrometer), [software](/tag/software), [spectral-workbench](/tag/spectral-workbench), [spectral-workbench-api](/tag/spectral-workbench-api), [developers](/tag/developers), [parent:spectral-workbench](/tag/parent:spectral-workbench)

----

A major change in Spectral Workbench 2 is a system called **Operations** (previously known as PowerTags). When you save a spectrum, you usually have to perform additional operations, sometimes [setting a cross section](#crossSection), certainly calibrating, and sometimes then smoothing or otherwise manipulating the data. But for various reasons, you often want to record and even revert some of those changes. Maybe you want to do them differently, or to recalibrate. 
cr
Operations are the new way to do this. Each time you apply an operation, the resulting dataset is saved in a [snapshot](/wiki/spectral-workbench-snapshots), so that a copy is archived and available in the database without having to run each calculation every time. operations typically feature a `key:value` pair. 

###How to use operations

Creating operations is easy; the Tools menu below each spectrum guides you through creating them with simple toolpanes. [Learn about using Spectral Workbench 2's tools here](/wiki/spectral-workbench-tools).

Watch this video about using Operations via the toolpanes:

<iframe width="560" height="315" src="https://www.youtube.com/embed/ZNZk_E3Nt3o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

****

##Available operations

Operations include:

####calibrate

`calibrate:<id>` - Copies calibration from spectrum with given `<id>`.

####linearCalibration

`linearCalibration:<b2>,<g2>` - Manually calibrated with two reference points `<b2>` and `<g2>`, which correspond to known positions 435.83 and 546.07, respectively. This should be the first operation, as it works best on sharp, full-width data that has not been range-limited or smoothed. However, if a `crossSection` or `forked` operation precedes it, that's acceptable. 

####range

`range:<min>-<max>` - Limits wavelength range to specified `<min>-<max>`, in nanometers, or if data is uncalibrated, then in pixels.

####smooth

`smooth:<amount>` - Rolling average smoothing by given # `<amount>` of pixels.

####subtract

`subtract:<id>` - Subtracts spectrum with given `<id>` from the current spectrum. Should point at a specific snapshot with syntax `subtract:<id>#<snapshot_id>`

####crossSection

`crossSection:<height>` - Sets the row of pixels, counting <height> pixels from top row, used to generate the graph. The default for any spectrum is the top row of pixels, the equivalent of `crossSection:0`, whereas `crossSection:20` would measure the brightness of each pixel in the 21st row down from the top (since we begin counting at 0). Please read [this section about what the cross section represents](/wiki/spectral-workbench-calibration#Video+cross+section+vs+Image+cross+section), as it may vary based on how you are capturing.

####transform

`transform:<expression>` - Filters this spectrum with a math `<expression>`, by running the brightness of each pixel through the math expression. More on this soon.

####blend

`blend:<expression>` - Filters this spectrum with a math `<expression>`, like `transform:`, but in combination with data from a given second spectrum. This allows for, for example, multiplying or dividing two spectra. 

****

##Passive Operations

Some operations don't affect the data at all; it's not clear if we're going to make these appear in the Tags listing instead. For now, these are generated automatically at various steps, and provide metadata about the spectrum, but aren't used to change the data:


####forked

`forked:<id>` - Spectrum is a forked copy of the Spectrum with given `<id>`. Generated automatically when you fork a spectrum.

####error

`error:<amount>` - Scores a calibration 'fit' by comparison to a known reference; lower is better, zero is perfect. Generated by the linear calibration tool.

####calibrationQuality

`calibrationQuality:<quality>` - Roughly indicates how good a calibration 'fit' is, in qualitative terms `good` for <12, `medium` for <16 and `poor` for anything higher/worse. Generated by the linear calibration tool.


****

##Contributing

The Operations framework is designed to be flexible and extensible, as we add more abilities to Spectral Workbench. Please contact the [developers list](/wiki/developers) with ideas and suggestions for new features and future versions, and check out Spectral Workbench on Github at https://github.com/publiclab/spectral-workbench.

Also check out our [Contributing to Public Lab Software page](/wiki/contributing-to-public-lab-software).
